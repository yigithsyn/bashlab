cmake_minimum_required(VERSION 3.16.3)
project(freq2wavelen VERSION 0.1.0)


if (WIN32)
  add_definitions(-D_CRT_SECURE_NO_WARNINGS)
endif (WIN32)

# commons
include_directories("include")
include_directories("libs/argtable-v3.2.1.52f24e5/dist/")
include_directories("libs/jansson-2.14/build/include/")
if(UNIX)
  link_directories("libs/jansson-2.14/build/lib/")
  link_directories("libs/argtable-v3.2.1.52f24e5/build/src/")
endif(UNIX)
if(WIN32)
  link_directories("libs/jansson-2.14/build/lib/Release")
  link_directories("libs/argtable-v3.2.1.52f24e5/build/src/Release")
endif(WIN32)
# file(GLOB COMMONS "libs/argtable3/dist/*.c")

file(GLOB SOURCES "src/impl/freq2wavelen_impl.c" "src/impl/wavelen2freq_impl.c")
add_executable(freq2wavelen src/freq2wavelen.c ${SOURCES} ${COMMONS})
add_executable(wavelen2freq src/wavelen2freq.c ${SOURCES} ${COMMONS})
if(WIN32)
target_link_libraries(freq2wavelen jansson argtable3_static)
target_link_libraries(wavelen2freq jansson argtable3_static)
endif(WIN32)
if(UNIX)
  target_link_libraries(freq2wavelen m jansson argtable3_static)
  target_link_libraries(wavelen2freq m jansson argtable3_static)
endif(UNIX)

file(GLOB SOURCES "src/impl/freq2wavelen_impl.c" "src/impl/ffdist_impl.c")
add_executable(ffdist src/ffdist.c ${SOURCES} ${COMMONS})
if(WIN32)
target_link_libraries(ffdist jansson argtable3_static)
endif(WIN32)
if(UNIX)
  target_link_libraries(ffdist m jansson argtable3_static)
endif(UNIX)

file(GLOB SOURCES "libs/algo/linspace.c")
add_executable(linspace src/linspace.c ${SOURCES} ${COMMONS})
target_include_directories(linspace PUBLIC "libs/algo")
if(WIN32)
target_link_libraries(linspace jansson argtable3_static)
endif(WIN32)
if(UNIX)
  target_link_libraries(linspace m jansson argtable3_static)
endif(UNIX)

install(TARGETS freq2wavelen wavelen2freq ffdist CONFIGURATIONS Release)